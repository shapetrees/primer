<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>Shape Trees Primer</title>
  <meta content="w3c/ED" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2016/W3C-ED" rel="stylesheet">
  <link href="https://www.w3.org/2008/site/images/favicon.ico" rel="icon">
  <meta content="Bikeshed version c5fd42b86, updated Mon Apr 5 16:27:33 2021 -0700" name="generator">
  <link href="https://shapetrees.org/TR/primer/" rel="canonical">
  <meta content="583d9c0e455fa2520104843b15f0f6c09fd445c8" name="document-revision">
<style>

	code.container {
		color: #005555;
	}

	code.notes {
		color: #770033;
	}

	code.citation {
		color: #330077;
	}

	code.image {
		color: #337700;
	}
</style>
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
<style>/* style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #707070;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #bbb;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* style-syntax-highlighting */

code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
<style>/* style-darkmode */

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Shape Trees Primer</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Editor’s Draft, <time class="dt-updated" datetime="2021-04-15">15 April 2021</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://shapetrees.org/TR/primer/">https://shapetrees.org/TR/primer/</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/shapetrees/primer/issues/">GitHub</a>
     <dd><a href="#issues-index">Inline In Spec</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard"><span class="p-name fn">Eric Prud'hommeaux</span>
     <dd class="editor p-author h-card vcard"><span class="p-name fn">Justin Bingham</span>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"> <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2020 <a href="https://www.w3.org/">W3C</a>®
  (<a href="https://www.csail.mit.edu/">MIT</a>, <a href="https://www.ercim.eu/">ERCIM</a>, <a href="https://www.keio.ac.jp/">Keio</a>, <a href="https://ev.buaa.edu.cn/">Beihang</a>).
   W3C <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This primer introduces shape trees and describes how Semantic Web Applications use them to consistently

	interoperate over constellations of data structures organized in resource hierarchies used by protocols 
	such as LDP and Solid.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li>
     <a href="#structure"><span class="secno">2</span> <span class="content">Shape Tree Structure</span></a>
     <ol class="toc">
      <li><a href="#structure-predicates"><span class="secno">2.1</span> <span class="content">Shape Tree Predicates</span></a>
     </ol>
    <li><a href="#planting"><span class="secno">3</span> <span class="content">Planting a Shape Tree</span></a>
    <li><a href="#data-instance"><span class="secno">4</span> <span class="content">Creating Data Instances</span></a>
    <li><a href="#describing"><span class="secno">5</span> <span class="content">Describing Shape Trees</span></a>
    <li><a href="#definitions"><span class="secno">6</span> <span class="content">Definitions</span></a>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
      <li><a href="#w3c-conformant-algorithms"><span class="secno"></span> <span class="content">Conformant Algorithms</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
     </ol>
    <li>
     <a href="#references①"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <p><strong class="advisement"> This Primer is undergoing active development. At this time, and until this advisement is removed,
it should not be considered as a reliable source of instruction on the use of Shape Trees. Please see the <a href="https://shapetrees.org/TR/specification/index.html">Shape Trees Specification</a> instead.</strong></p>
   <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction"></a></h2>
   <p>Realizing the value proposition of the Semantic Web lies in building useful and robust applications that
can interoperate over linked data.</p>
   <p>Protocols such as <a data-link-type="biblio" href="#biblio-ldp">[LDP]</a> and Solid organize linked data graphs into resource hierarchies, providing a foundation
upon which these robust and interoperable applications can be created.</p>
   <p>Application interoperability depends on applications sharing semantics for relationships and data structures.
Existing technologies fulfill portions of those dependencies:</p>
   <ul>
    <li data-md>
     <p>RDF's foundation in unambiguous identifiers provides an infrastructure that allows for interoperability,
but does not specifically encouraging or enforce it.</p>
    <li data-md>
     <p>Shape languages (e.g. ShEx and <a data-link-type="biblio" href="#biblio-shacl">[SHACL]</a>) provide machine-readable, enforceable data structure
definitions on single resources.</p>
   </ul>
   <p>For applications that operate on more interconnected resources, <em>Shape Trees</em> express the layout of those
resources and associate them with their respective shapes.</p>
   <p>Shape trees marry RDF vocabularies, shapes, and resources into "little trees" that provide machine to machine
interoperability, while at the same time creating concepts that humans can easily comprehend, such as medical 
records, notes, notebooks, calendars, and financial records.</p>
   <p>This allows one to treat a set of related resources as a single grouping, and apply that to a range of
operations including access control, data organization, data validation, and data migration.</p>
   <p>Shape trees are defined as an RDF graph structure that expresses a set of expected behaviors by agents that
work with them. These semantics can be implemented by a server or a client-side library that proxies 
requests to a server.</p>
   <h2 class="heading settled" data-level="2" id="structure"><span class="secno">2. </span><span class="content">Shape Tree Structure</span><a class="self-link" href="#structure"></a></h2>
    The following image introduces Shape trees by way of an example shape tree for interoperable notes called "CommonNote".
It captures notes, any images included therein, as well as the note's citations. 
   <p>The example image includes three columns:</p>
   <ul>
    <li data-md>
     <p>Shape definitions (expressed in ShEx) for the resources described by the CommonNote shape tree</p>
    <li data-md>
     <p>A shape tree (expressed in Turtle) for CommonNote</p>
    <li data-md>
     <p>Example data instances adhering to the CommonNote ShapeTree (a "resource hierarchy")</p>
   </ul>
   <table align="center" width="100%">
    <thead>
     <tr>
      <th align="center" width="31%"><u>Shapes (ShEx)</u>
      <th align="center" width="42%"><u>Shape Tree (Turtle)</u>
      <th align="center" width="27%"><u>Resource Hierarchy</u>
   </table>
   <p><img alt="colored example of ShEx schema, shape tree, and resource hierarchy" src="shape-tree.svg" width="100%"></p>
   <p>Here, <code class="container">/data/medicalNotes</code> and <code class="container">/data/astronomy/notes</code> are
both shape tree instances of the <code class="container">&lt;#container></code> shape tree.
They are both Containers per <code class="container">&lt;#container> tree:expectsType tree:ShapeTreeContainer</code> and could contain any number of note shape tree instances per <code class="container">tree:contains &lt;#note></code>.
In this example, <code class="notes">xrays-2019-08</code>, <code class="notes">GP-2020-04-18</code> and <code class="notes">blue-shift</code> respectively are shape tree instances of the <code class="notes">&lt;#note></code> shape tree.
Each contains a binary <code class="image">image</code> and blue-shift has a <code class="citation">citation</code>.</p>
   <p>A shape tree document can contain multiple shape tree definitions. A given definition in a shape tree resource
can be referenced and used on its own as a standalone shape tree, or as part of an interconnected hierarchy 
of shape trees.
The shape tree describing the <code class="citation">citation</code> has the subject node <code class="citation">&lt;#citation></code>.
This shape tree asserts that associated resources (e.g. <code class="citation">cit-M33.ttl</code>) must:</p>
   <ul>
    <li data-md>
     <p>Be a Resource per <code class="citation">&lt;#citation> tree:expectsType tree:ShapeTreeResource</code></p>
    <li data-md>
     <p>Have a name matching a URI template (i.e. must start with "cit-") per <code class="citation">&lt;#citation> tree:matchesUriTemplate "cit-{name}"</code></p>
    <li data-md>
     <p>Conform to the shape <code class="citation">&lt;CommonNote#Citation></code> per <code class="citation">&lt;#citation> tree:validatedBy &lt;CommonNote#Citation></code></p>
   </ul>
   <h3 class="heading settled" data-level="2.1" id="structure-predicates"><span class="secno">2.1. </span><span class="content">Shape Tree Predicates</span><a class="self-link" href="#structure-predicates"></a></h3>
    A shape tree consists of: 
   <ul>
    <li data-md>
     <p>An <dfn data-dfn-type="dfn" data-noexport id="id">id<a class="self-link" href="#id"></a></dfn>: an addressable label for this shape tree<br> As with all RDF structures, providing an id makes it possible to address this entity from outside the document.</p>
    <li data-md>
     <p>An <dfn data-dfn-type="dfn" data-noexport id="expectstype">expectsType<a class="self-link" href="#expectstype"></a></dfn>: type of the associated resource: <code>tree:ShapeTreeContainer</code>, <code>tree:ShapeTreeResource</code> OR <code>tree:ShapeTreeNonRDFResource</code>.<br> The expectsType specifies whether the associated resources should be a container, a normal resource, or a 
non-RDF source.  Shape tree implementations
will map these resource types to the appropriate constructs for the intended platform (i.e. in an LDP 
environment tree:ShapeTreeResource would map to ldp:Resource).</p>
    <li data-md>
     <p>either of:</p>
     <ul>
      <li data-md>
       <p>A <dfn data-dfn-type="dfn" data-noexport id="label">label<a class="self-link" href="#label"></a></dfn>: label for a resource which will always be created;<br> This is used when resources with specific names will appear in the resource hierarchy.</p>
      <li data-md>
       <p>A <dfn data-dfn-type="dfn" data-noexport id="matchesuritemplate">matchesUriTemplate<a class="self-link" href="#matchesuritemplate"></a></dfn>: pattern for a resource to be matched against a POSTed Slug: header or a resource name in a PUT/PATCH.<br> This is used to constrain resource creation based resource name patterns.</p>
     </ul>
    <li data-md>
     <p>A <dfn data-dfn-type="dfn" data-noexport id="validatedby">validatedBy<a class="self-link" href="#validatedby"></a></dfn>: The RDF graph structure of any POSTed or PUT resource must conform to this shape;<br> This allows shape trees to ensure that the data in the resource hierarchy conforms to the expected schemas.</p>
    <p></p>
    <li data-md>
     <p>An optional <dfn data-dfn-type="dfn" data-noexport id="supports">supports<a class="self-link" href="#supports"></a></dfn>: an IRI to another shape tree.<br> This captures a relationship where a shape tree is dependent on another for purposes of ancillary tasks like indexing.  It is expected to describe resources which extend or another shape tree.</p>
    <li data-md>
     <p>An optional <dfn data-dfn-type="dfn" data-noexport id="contains">contains<a class="self-link" href="#contains"></a></dfn>: a list of nested shape trees.<br> This captures the containership of a conforming resource hierarchy.  In addition to containing other shape trees, this list may include <code>tree:AllowNone</code>, <code>tree:AllowAll</code>, <code>tree:AllowContainers</code>, <code>tree:AllowResources</code>, <code>tree:AllowNonRDFSources</code> which described the intended behavior when a resource is created that does not adhere to any matching matchesUriTemplate predicates.</p>
    <li data-md>
     <p>An optional <dfn data-dfn-type="dfn" data-noexport id="references">references<a class="self-link" href="#references"></a></dfn>: a list of referenced shape trees.<br> These provide advice that the data in resources described by this shape tree references another shape tree.  This enables connectivity of shape trees
without requiring direct nesting/containment of those relationships.</p>
   </ul>
   <p>Annotating all shape trees within a given resource is an optional <dfn data-dfn-type="dfn" data-noexport id="hasshapetreedecoratorindex">hasShapeTreeDecoratorIndex<a class="self-link" href="#hasshapetreedecoratorindex"></a></dfn>: An IRI containing an index of SKOS graphs.</p>
   <p>As detailed in <a href="#describing">Describing Shape Trees</a> below, SKOS provides an extensible means to describe a shape tree in human-readable terms.  The <code>tree:hasShapeTreeDecoratorIndex</code> allows shape tree maintainers to provide a reference to SKOS graphs that accurately and reliably describe the shape tree as intended, which is important for authorization use cases.</p>
   <h2 class="heading settled" data-level="3" id="planting"><span class="secno">3. </span><span class="content">Planting a Shape Tree</span><a class="self-link" href="#planting"></a></h2>
    The above example describes an instance at <code class="notes">/data/CommonNotes</code>.
This is an LDP Container which is constrained to contain only instances of <code>&lt;CommonNoteShapeTree#note></code>.
This container is described by the shape tree <code>&lt;CommonNoteShapeTree#container></code>: 
<pre><code class="container">
&lt;#container>
  tree:expectsType tree:ShapeTreeContainer ;
  tree:contains &lt;#note> .
</code></pre>
   <p>In order to create this, an application like NeverNote would use a <b>plant</b> operation to create an instance of the <code class="container">&lt;#container></code> shape tree.
This plant operation is a POST to the parent Container with one or more <code>rel="ShapeTree"</code> Link header .
The resulting LDP Container for CommonNotes is expected to be shared with other applications.
Below, we use the name "OtherNote" as an example of another application which can consume and process data conforming to the shapes referenced by the CommonNote shape tree.</p>
   <figure>
    <figcaption>Plant operation</figcaption>
<pre class="highlight">POST /data/
Slug: CommonNotes
Link: &lt;http://www.w3.org/ns/ldp#Container>; rel="type"
Link: &lt;<a href="https://github.com/shapetrees/specification/blob/master/solidApps/staticRoot/nevernote/NeverNoteShapeTree.jsonld">http://commonnote.example/CommonNoteShapeTree#container</a>>; rel="ShapeTree"
</pre>
   </figure>
   <p>The response identifies a LDP Container for CommonNotes notes:</p>
   <figure>
    <figcaption>Plant response</figcaption>
<pre class="highlight">HTTP 201 CREATED
Location: http://pod.example/data/CommonNotes/
Content-type: text/turtle; charset=utf-8
Content-length: 396
</pre>
   </figure>
   <p>Planting a shape tree results in a new LDP Container in the resource hierarchy.
Metadata associated with this container describes the planted shape tree that manages the contents of the container.</p>
   <figure>
    <figcaption>Contents of http://pod.example/data/CommonNotes/ related metadata</figcaption>
<pre class="highlight"><c- k>@prefix</c-> <c- nn>ldp:</c-> <c- g>&lt;http://www.w3.org/ns/ldp#></c-><c- p>.</c->
<c- k>@prefix</c-> <c- nn>xsd:</c-> <c- g>&lt;http://www.w3.org/2001/XMLSchema#></c-><c- p>.</c->
<c- k>@prefix</c-> <c- nn>tree:</c-> <c- g>&lt;http://www.w3.org/ns/shapetree#></c-><c- p>.</c->
<c- k>@prefix</c-> <c- nn>dc:</c-> <c- g>&lt;http://purl.org/dc/terms/></c-><c- p>.</c->
<c- k>@prefix</c-> <c- nn>dcterms:</c-> <c- g>&lt;http://purl.org/dc/terms/></c-><c- p>.</c->

<c- g>&lt;></c->
  <c- nn>tree</c-><c- p>:</c-><c- f>hasShapeTreeLocator</c-> <c- g>&lt;#bc1b490a-537d-4749-b778-cd7d6da3ac56></c-> <c- p>.</c->

<c- g>&lt;#bc1b490a-537d-4749-b778-cd7d6da3ac56></c->
  <c- nn>tree</c-><c- p>:</c-><c- f>hasRootShapeTree</c-> <c- g>&lt;http://commonnote.example/CommonNoteShapeTree#container></c-> <c- p>;</c->
  <c- nn>tree</c-><c- p>:</c-><c- f>hasShapeTree</c-> <c- g>&lt;http://commonnote.example/CommonNoteShapeTree#container></c-> <c- p>;</c->
  <c- nn>tree</c-><c- p>:</c-><c- f>hasShapeTreeInstancePath</c-> <c- s>"."</c-> <c- p>;</c->
  <c- nn>tree</c-><c- p>:</c-><c- f>hasShapeTreeInstanceRoot</c-> <c- g>&lt;/data/CommonNotes/></c-> <c- p>.</c->
</pre>
   </figure>
   <h2 class="heading settled" data-level="4" id="data-instance"><span class="secno">4. </span><span class="content">Creating Data Instances</span><a class="self-link" href="#data-instance"></a></h2>
   <p>Despite NeverNote having planted the LDP Container <code>/data/CommonNotes</code>, it could be another application, OtherNote, which first creates data there.</p>
   <p>When POSTing to any managed container, there is expected to be a contains shape tree matching the new resource.
If the shape tree includes a validatedBy, the POST must include a Link: rel="focusNode" header to identify the node in the POSTed data that should conform to that shape.</p>
   <figure>
    <figcaption>POSTing to a managed container</figcaption>
<pre class="highlight">POST /data/CommonNotes/
<c- nn>Link</c-><c- p>:</c-> <c- g>&lt;#note1></c-><c- p>;</c-> rel=<c- s>"focusNode"</c->

<c- k>PREFIX</c-> <c- nn>:</c-> <c- g>&lt;http://nevernote.example/ns#></c->
<c- k>PREFIX</c-> <c- nn>ldp:</c-> <c- g>&lt;http://www.w3.org/ns/ldp#></c->
<c- k>PREFIX</c-> <c- nn>xsd:</c-> <c- g>&lt;http://www.w3.org/2001/XMLSchema#></c->

<c- g>&lt;#note1></c->
  <c- p>:</c-><c- f>title</c-> <c- s>"Note1"</c-> <c- p>;</c->
  <c- p>:</c-><c- f>content</c-> <c- s>"Don’t believe the hype!"</c-> <c- p>;</c->
  <c- p>:</c-><c- f>updated</c-> <c- s>"2020-01-01T12:34:00Z"</c-><c- p>^^</c-><c- nn>xsd</c-><c- p>:</c-><c- f>dateTime</c-> <c- p>;</c->
  <c- p>:</c-><c- f>tagNames</c-> <c- p>(</c-><c- s>"tag1"</c-> <c- s>"tag2"</c-><c- p>)</c-> <c- p>.</c->
</pre>
   </figure>
   <p>When an application POSTs to a Managed Container, the shape tree-aware agent handling the POST locates the appropriate shape tree that is contained,
via the <code>tree:contains</code> predicate, that matches its URI template.</p>
   <p class="issue" id="issue-4d97b81e"><a class="self-link" href="#issue-4d97b81e"></a> Add explanation of explicit header to guide "contains"</p>
   <ul>
    <li data-md>
     <p>If the shape tree includes a <code>tree:validatedBy</code> predicate, the POST body is parsed and the focus node is tested for conformance.</p>
    <li data-md>
     <p>If the posted resource is invalid, it will return with a 422 Unprocessable Entity message.</p>
    <li data-md>
     <p>If no matching shape tree is found, the agent will use any present <code>tree:Allow*</code> IRIs to determine whether to allow the new resource.</p>
    <li data-md>
     <p>If the posted resource is valid, the typical LDP processing will create an entity whose contents include the POSTed body.</p>
   </ul>
   <p>#matching-contained-shapetree</p>
   <h2 class="heading settled" data-level="5" id="describing"><span class="secno">5. </span><span class="content">Describing Shape Trees</span><a class="self-link" href="#describing"></a></h2>
   <p>To aid in the human-readability of shape trees, one or more SKOS graphs can be used to provide a textual representation of the structure.</p>
   <p>Making use of the <code>tree:hasShapeTree</code> predicate, labels can be applied to specific Shape Trees using any language.
A SKOS index document allows for discovery of multiple definitions of a Shape Tree supporting multiple language preferences and cognitive abilities.
The convention on how this index of SKOS graphs is structured and used, along with the rules to govern the selection of the appropriate graph for a user is the responsibility of the ecosystem using Shape Trees.</p>
   <figure>
    <figcaption>Sample SKOS index document, with references to English and Russian representations of the CommonNotes shape tree</figcaption>
<pre class="highlight"><c- g>&lt;#index></c->
  <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>ShapeTreeDecoratorIndex</c-> <c- p>;</c->
  <c- nn>treeIndex</c-><c- p>:</c-><c- f>hasSeries</c-> <c- g>&lt;#en></c-><c- p>,</c-> <c- g>&lt;#ru></c-> <c- p>.</c->

<c- g>&lt;#en></c->
  <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>ShapeTreeDecoratorSeries</c-> <c- p>;</c->
  <c- nn>tree</c-><c- p>:</c-><c- f>hasHierarchy</c-> <c- g>&lt;#en-v1></c-><c- p>,</c-> <c- g>&lt;#en-v1.1></c-> <c- p>.</c->

<c- g>&lt;#en-v1></c->
  <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>ShapeTreeDecoratorHierarchy</c-> <c- p>;</c->
  <c- nn>xsd</c-><c- p>:</c-><c- f>lang</c-> <c- s>"en"</c-> <c- p>;</c->
  <c- nn>tree</c-><c- p>:</c-><c- f>hasVersion</c-> <c- s>"1.0"</c-> <c- p>;</c->
  <c- nn>tree</c-><c- p>:</c-><c- f>hasSkosGraph</c-> <c- g>&lt;https://commonnote.example/CommonNoteGraph-en-v1#root></c-> <c- p>;</c->
  <c- nn>tree</c-><c- p>:</c-><c- f>hasSHA256Hash:</c-> <c- s>"92ac6762c129666107299c2386420fdb31b12df7723b3aa0d132485fda864a47"</c-> <c- p>.</c->

<c- g>&lt;#en-v1.1></c->
  <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>ShapeTreeDecoratorHierarchy</c-> <c- p>;</c->
  <c- nn>xsd</c-><c- p>:</c-><c- f>lang</c-> <c- s>"en"</c-> <c- p>;</c->
  <c- nn>tree</c-><c- p>:</c-><c- f>hasVersion</c-> <c- s>"1.1"</c-> <c- p>;</c->
  <c- nn>tree</c-><c- p>:</c-><c- f>hasSkosGraph</c-> <c- g>&lt;https://commonnote.example/CommonNoteGraph-en-v1.1#root></c-> <c- p>;</c->
  <c- nn>tree</c-><c- p>:</c-><c- f>hasSHA256Hash:</c-> <c- s>"74a468adf584231d0aa3b3277fd21b13bdf0246832c992701666921c2676ca29"</c-> <c- p>.</c->

<c- g>&lt;#ru></c->
  <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>ShapeTreeDecoratorSeries</c-> <c- p>;</c->
  <c- nn>treeIndex</c-><c- p>:</c-><c- f>hasHierarchy</c-> <c- g>&lt;#ru-v1></c-> <c- p>.</c->

<c- g>&lt;#ru-v1></c->
  <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>ShapeTreeDecoratorHierarchy</c-> <c- p>;</c->
  <c- nn>xsd</c-><c- p>:</c-><c- f>lang</c-> <c- s>"ru"</c-> <c- p>;</c->
  <c- nn>tree</c-><c- p>:</c-><c- f>hasVersion</c-> <c- s>"1.0"</c-> <c- p>;</c->
  <c- nn>tree</c-><c- p>:</c-><c- f>hasSkosGraph</c-> <c- g>&lt;https://commonnote.example/CommonNoteGraph-ru-v1#root></c-> <c- p>;</c->
  <c- nn>tree</c-><c- p>:</c-><c- f>hasSHA256Hash:</c-> <c- s>"7d8cf659fdbd69618658e043c2c6e8c8e9395f4b652a38c2e5922eb7a51de42c"</c-> <c- p>.</c->
</pre>
   </figure>
   <figure>
    <figcaption>Sample SKOS graph <code>(&lt;#en-v1>)</code>, in English, defining the terms in the CommonNotes shape tree</figcaption>
<pre class="highlight"><c- k>@prefix</c-> <c- nn>f:</c-> <c- g>&lt;/data/CommonNotesShapeTree#container></c-> <c- p>.</c->
<c- k>@prefix</c-> <c- nn>tree:</c-> <c- g>&lt;http://www.w3.org/ns/shapetree#></c-> <c- p>.</c->
<c- k>@prefix</c-> <c- nn>skos:</c-> <c- g>&lt;http://www.w3.org/2004/02/skos/core#></c-> <c- p>.</c->
<c- k>@prefix</c-> <c- nn>skosxl:</c-> <c- g>&lt;http://www.w3.org/2008/05/skos-xl#></c-> <c- p>.</c->

<c- g>&lt;#root></c-> <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>ShapeTreeLabel</c-> <c- p>;</c-> <c- nn>tree</c-><c- p>:</c-><c- f>hasShapeTree</c-> <c- nn>f</c-><c- p>:</c-><c- f>root</c-> <c- p>;</c-> <c- nn>skosxl</c-><c- p>:</c-><c- f>prefLabel</c-> <c- p>[</c-> <c- nn>skosxl</c-><c- p>:</c-><c- f>literalForm</c-> <c- s>"Note Container"</c-><c- o>@</c->en <c- p>]</c-> <c- p>;</c-> <c- nn>skos</c-><c- p>:</c-><c- f>narrower</c-> <c- g>&lt;#note></c-> <c- p>.</c->
   <c- g>&lt;#note></c-> <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>ShapeTreeLabel</c-> <c- p>;</c-> <c- nn>tree</c-><c- p>:</c-><c- f>hasShapeTree</c-> <c- nn>f</c-><c- p>:</c-><c- f>note</c-> <c- p>;</c-> <c- nn>skosxl</c-><c- p>:</c-><c- f>prefLabel</c-> <c- p>[</c-> <c- nn>skosxl</c-><c- p>:</c-><c- f>literalForm</c-> <c- s>"Text content of a note"</c-><c- o>@</c->en <c- p>]</c-> <c- p>;</c-> <c- nn>skos</c-><c- p>:</c-><c- f>narrower</c-> <c- g>&lt;#citation></c-><c- p>,</c-> <c- g>&lt;#image></c-> <c- p>.</c->
      <c- g>&lt;#citation></c-> <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>ShapeTreeLabel</c-> <c- p>;</c-> <c- nn>tree</c-><c- p>:</c-><c- f>hasShapeTree</c-> <c- nn>f</c-><c- p>:</c-><c- f>citation</c-> <c- p>;</c-> <c- nn>skosxl</c-><c- p>:</c-><c- f>prefLabel</c-> <c- p>[</c-> <c- nn>skosxl</c-><c- p>:</c-><c- f>literalForm</c-> <c- s>"Citation to another document within a note"</c-><c- o>@</c->en <c- p>]</c-> <c- p>.</c->
      <c- g>&lt;#image></c-> <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>ShapeTreeLabel</c-> <c- p>;</c-> <c- nn>tree</c-><c- p>:</c-><c- f>hasShapeTree</c-> <c- nn>f</c-><c- p>:</c-><c- f>citation</c-> <c- p>;</c-> <c- nn>skosxl</c-><c- p>:</c-><c- f>prefLabel</c-> <c- p>[</c-> <c- nn>skosxl</c-><c- p>:</c-><c- f>literalForm</c-> <c- s>"Embedded image or graphic within a note"</c-><c- o>@</c->en <c- p>]</c-> <c- p>.</c->
</pre>
   </figure>
   <figure>
    <figcaption>Sample SKOS graph <code>(&lt;#ru-v1>)</code>, in Russian, describing the same CommonNotes shape tree:</figcaption>
<pre class="highlight"><c- k>@prefix</c-> <c- nn>f:</c-> <c- g>&lt;/data/CommonNotesShapeTree#container></c-> <c- p>.</c->
<c- k>@prefix</c-> <c- nn>tree:</c-> <c- g>&lt;http://www.w3.org/ns/shapetree#></c-> <c- p>.</c->
<c- k>@prefix</c-> <c- nn>skos:</c-> <c- g>&lt;http://www.w3.org/2004/02/skos/core#></c-> <c- p>.</c->
<c- k>@prefix</c-> <c- nn>skosxl:</c-> <c- g>&lt;http://www.w3.org/2008/05/skos-xl#></c-> <c- p>.</c->

<c- g>&lt;#root></c-> <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>ShapeTreeLabel</c-> <c- p>;</c-> <c- nn>tree</c-><c- p>:</c-><c- f>hasShapeTree</c-> <c- nn>f</c-><c- p>:</c-><c- f>root</c-> <c- p>;</c-> <c- nn>skosxl</c-><c- p>:</c-><c- f>prefLabel</c-> <c- p>[</c-> <c- nn>skosxl</c-><c- p>:</c-><c- f>literalForm</c-> <c- s>"контейнер для заметок"</c-><c- o>@</c->ru <c- p>]</c-> <c- p>;</c-> <c- nn>skos</c-><c- p>:</c-><c- f>narrower</c-> <c- g>&lt;#note></c-> <c- p>.</c->
   <c- g>&lt;#note></c-> <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>ShapeTreeLabel</c-> <c- p>;</c-> <c- nn>tree</c-><c- p>:</c-><c- f>hasShapeTree</c-> <c- nn>f</c-><c- p>:</c-><c- f>note</c-> <c- p>;</c-> <c- nn>skosxl</c-><c- p>:</c-><c- f>prefLabel</c-> <c- p>[</c-> <c- nn>skosxl</c-><c- p>:</c-><c- f>literalForm</c-> <c- s>"текстовое содержание заметки"</c-><c- o>@</c->ru <c- p>]</c-> <c- p>;</c-> <c- nn>skos</c-><c- p>:</c-><c- f>narrower</c-> <c- g>&lt;#citation></c-><c- p>,</c-> <c- g>&lt;#image></c-> <c- p>.</c->
      <c- g>&lt;#citation></c-> <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>ShapeTreeLabel</c-> <c- p>;</c-> <c- nn>tree</c-><c- p>:</c-><c- f>hasShapeTree</c-> <c- nn>f</c-><c- p>:</c-><c- f>citation</c-> <c- p>;</c-> <c- nn>skosxl</c-><c- p>:</c-><c- f>prefLabel</c-> <c- p>[</c-> <c- nn>skosxl</c-><c- p>:</c-><c- f>literalForm</c-> <c- s>"Цитирование другого документа в заметке"</c-><c- o>@</c->ru <c- p>]</c-> <c- p>.</c->
      <c- g>&lt;#image></c-> <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>ShapeTreeLabel</c-> <c- p>;</c-> <c- nn>tree</c-><c- p>:</c-><c- f>hasShapeTree</c-> <c- nn>f</c-><c- p>:</c-><c- f>citation</c-> <c- p>;</c-> <c- nn>skosxl</c-><c- p>:</c-><c- f>prefLabel</c-> <c- p>[</c-> <c- nn>skosxl</c-><c- p>:</c-><c- f>literalForm</c-> <c- s>"Встроенное изображение или изображение в заметке"</c-><c- o>@</c->ru <c- p>]</c-> <c- p>.</c->
</pre>
   </figure>
   <h2 class="heading settled" data-level="6" id="definitions"><span class="secno">6. </span><span class="content">Definitions</span><a class="self-link" href="#definitions"></a></h2>
    <strong>All definitions as stated below should be considered in the context of shape trees, whether explicitly stated or not.</strong> 
   <p>The <dfn data-dfn-type="dfn" data-noexport id="plant">Plant<a class="self-link" href="#plant"></a></dfn> Operation represents the act of marking a new or existing container as being managed by one or more shape tree.</p>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
   <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
   <p>Conformance requirements are expressed
    with a combination of descriptive assertions
    and RFC 2119 terminology.
    The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
    in the normative parts of this document
    are to be interpreted as described in RFC 2119.
    However, for readability,
    these words do not appear in all uppercase letters in this specification. </p>
   <p>All of the text of this specification is normative
    except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a> </p>
   <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text
    with <code>class="example"</code>,
    like this: </p>
   <div class="example" id="w3c-example">
    <a class="self-link" href="#w3c-example"></a> 
    <p>This is an example of an informative example. </p>
   </div>
   <p>Informative notes begin with the word “Note”
    and are set apart from the normative text
    with <code>class="note"</code>,
    like this: </p>
   <p class="note" role="note">Note, this is an informative note. </p>
   <h3 class="no-ref no-num heading settled" id="w3c-conformant-algorithms"><span class="content">Conformant Algorithms</span><a class="self-link" href="#w3c-conformant-algorithms"></a></h3>
   <p>Requirements phrased in the imperative as part of algorithms
    (such as "strip any leading space characters"
    or "return false and abort these steps")
    are to be interpreted with the meaning of the key word
    ("must", "should", "may", etc)
    used in introducing the algorithm. </p>
   <p>Conformance requirements phrased as algorithms or specific steps
    can be implemented in any manner,
    so long as the end result is equivalent.
    In particular, the algorithms defined in this specification
    are intended to be easy to understand
    and are not intended to be performant.
    Implementers are encouraged to optimize. </p>
  </div>
<script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#contains">contains</a><span>, in §2.1</span>
   <li><a href="#expectstype">expectsType</a><span>, in §2.1</span>
   <li><a href="#hasshapetreedecoratorindex">hasShapeTreeDecoratorIndex</a><span>, in §2.1</span>
   <li><a href="#id">id</a><span>, in §2.1</span>
   <li><a href="#label">label</a><span>, in §2.1</span>
   <li><a href="#matchesuritemplate">matchesUriTemplate</a><span>, in §2.1</span>
   <li><a href="#plant">Plant</a><span>, in §6</span>
   <li><a href="#references">references</a><span>, in §2.1</span>
   <li><a href="#supports">supports</a><span>, in §2.1</span>
   <li><a href="#validatedby">validatedBy</a><span>, in §2.1</span>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references①"><span class="content">References</span><a class="self-link" href="#references①"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-ldp">[LDP]
   <dd>Steve Speicher; John Arwe; Ashok Malhotra. <a href="https://www.w3.org/TR/ldp/">Linked Data Platform 1.0</a>. 26 February 2015. REC. URL: <a href="https://www.w3.org/TR/ldp/">https://www.w3.org/TR/ldp/</a>
   <dt id="biblio-shacl">[SHACL]
   <dd>Holger Knublauch; Dimitris Kontokostas. <a href="https://www.w3.org/TR/shacl/">Shapes Constraint Language (SHACL)</a>. 20 July 2017. REC. URL: <a href="https://www.w3.org/TR/shacl/">https://www.w3.org/TR/shacl/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> Add explanation of explicit header to guide "contains"<a href="#issue-4d97b81e"> ↵ </a></div>
  </div>